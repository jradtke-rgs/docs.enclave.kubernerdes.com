"use strict";(globalThis.webpackChunkdocs_enclave_kubernerdes_com=globalThis.webpackChunkdocs_enclave_kubernerdes_com||[]).push([[678],{8484(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"day-0/hardware","title":"Hardware","description":"Bill of Materials","source":"@site/docs/day-0/hardware.md","sourceDirName":"day-0","slug":"/day-0/hardware","permalink":"/docs/day-0/hardware","draft":false,"unlisted":false,"editUrl":"https://github.com/jradtke-rgs/docs.enclave.kubernerdes.com/edit/main/docs/day-0/hardware.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"hardware","title":"Hardware","sidebar_label":"Hardware","sidebar_position":2},"sidebar":"enclaveSidebar","previous":{"title":"Overview","permalink":"/docs/day-0/"},"next":{"title":"Network Planning","permalink":"/docs/day-0/network-planning"}}');var d=r(4848),t=r(8453);const i={id:"hardware",title:"Hardware",sidebar_label:"Hardware",sidebar_position:2},l="Hardware",c={},o=[{value:"Bill of Materials",id:"bill-of-materials",level:2},{value:"NUC Specifications",id:"nuc-specifications",level:2},{value:"nuc-00 (Admin Host) \u2014 NUC13ANHi3",id:"nuc-00-admin-host--nuc13anhi3",level:3},{value:"nuc-01, nuc-02, nuc-03 (Harvester Cluster) \u2014 NUC13ANHi7",id:"nuc-01-nuc-02-nuc-03-harvester-cluster--nuc13anhi7",level:3},{value:"Physical Layout",id:"physical-layout",level:2},{value:"BIOS Configuration",id:"bios-configuration",level:2},{value:"Cabling Notes",id:"cabling-notes",level:2},{value:"Power Consumption",id:"power-consumption",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"hardware",children:"Hardware"})}),"\n",(0,d.jsx)(n.h2,{id:"bill-of-materials",children:"Bill of Materials"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Qty"}),(0,d.jsx)(n.th,{children:"Item"}),(0,d.jsx)(n.th,{children:"Role"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"Intel NUC 13 Pro (NUC13ANHi3)"}),(0,d.jsx)(n.td,{children:"Admin host (nuc-00)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"Intel NUC 13 Pro (NUC13ANHi7)"}),(0,d.jsx)(n.td,{children:"Harvester compute nodes (nuc-01/02/03)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"64 GB DDR4 SO-DIMM (2\xd7 32 GB)"}),(0,d.jsx)(n.td,{children:"RAM per node"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"1 TB NVMe SSD (primary)"}),(0,d.jsx)(n.td,{children:"OS/boot per node"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"3"}),(0,d.jsx)(n.td,{children:"2 TB NVMe SSD (secondary)"}),(0,d.jsx)(n.td,{children:"Longhorn/Harvester data (nuc-01/02/03)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"16-port gigabit switch (managed)"}),(0,d.jsx)(n.td,{children:"LAN fabric"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Several"}),(0,d.jsx)(n.td,{children:"Cat6 patch cables"}),(0,d.jsx)(n.td,{children:"Node-to-switch + uplink"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"1"}),(0,d.jsx)(n.td,{children:"USB keyboard + HDMI display (or KVM)"}),(0,d.jsx)(n.td,{children:"Initial console access"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"4"}),(0,d.jsx)(n.td,{children:"USB flash drives (\u2265 8 GB)"}),(0,d.jsx)(n.td,{children:"Bootable OS installers"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"nuc-specifications",children:"NUC Specifications"}),"\n",(0,d.jsx)(n.h3,{id:"nuc-00-admin-host--nuc13anhi3",children:"nuc-00 (Admin Host) \u2014 NUC13ANHi3"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Component"}),(0,d.jsx)(n.th,{children:"Spec"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Model"}),(0,d.jsx)(n.td,{children:"Intel NUC 13 Pro (NUC13ANHi3)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"RAM"}),(0,d.jsx)(n.td,{children:"64 GB DDR4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Storage"}),(0,d.jsx)(n.td,{children:"1 TB NVMe (OS + VMs)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Network"}),(0,d.jsx)(n.td,{children:"Onboard GbE"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Role"}),(0,d.jsx)(n.td,{children:"KVM host, PXE server, infra VMs"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["The admin host runs KVM and hosts three VMs (",(0,d.jsx)(n.code,{children:"nuc-00-01"}),", ",(0,d.jsx)(n.code,{children:"nuc-00-02"}),", ",(0,d.jsx)(n.code,{children:"nuc-00-03"}),") providing DHCP, DNS (primary and secondary), HAProxy, and Keepalived. It also serves PXE/HTTP for Harvester installation."]}),"\n",(0,d.jsx)(n.p,{children:"An LVM volume group is created from the NVMe drive to provide flexible VM disk allocation:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"/dev/nvme0n1p1  \u2192 /boot/efi       (512 MB)\n/dev/nvme0n1p2  \u2192 /boot           (1 GB)\n/dev/nvme0n1p3  \u2192 / (ext4)        (100 GB)\n/dev/nvme0n1p4  \u2192 LVM PV          (remainder)\n  \u2514\u2500\u2500 vg-infra\n      \u251c\u2500\u2500 lv-nuc-00-01 (40 GB)  \u2192 nuc-00-01 VM disk\n      \u251c\u2500\u2500 lv-nuc-00-02 (40 GB)  \u2192 nuc-00-02 VM disk\n      \u2514\u2500\u2500 lv-nuc-00-03 (40 GB)  \u2192 nuc-00-03 VM disk\n"})}),"\n",(0,d.jsx)(n.h3,{id:"nuc-01-nuc-02-nuc-03-harvester-cluster--nuc13anhi7",children:"nuc-01, nuc-02, nuc-03 (Harvester Cluster) \u2014 NUC13ANHi7"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Component"}),(0,d.jsx)(n.th,{children:"Spec"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Model"}),(0,d.jsx)(n.td,{children:"Intel NUC 13 Pro (NUC13ANHi7)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"RAM"}),(0,d.jsx)(n.td,{children:"64 GB DDR4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Storage (primary)"}),(0,d.jsxs)(n.td,{children:["1 TB SSD (",(0,d.jsx)(n.code,{children:"/dev/sda"})," \u2014 Harvester OS)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Storage (secondary)"}),(0,d.jsxs)(n.td,{children:["2 TB NVMe (",(0,d.jsx)(n.code,{children:"/dev/nvme0n1"})," \u2014 Longhorn data volumes)"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Network"}),(0,d.jsxs)(n.td,{children:["Onboard GbE (",(0,d.jsx)(n.code,{children:"enp86s0"}),")"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Role"}),(0,d.jsx)(n.td,{children:"Harvester HCI nodes"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Harvester uses the primary SSD for its OS and etcd, and the secondary NVMe is added to the Longhorn storage pool for persistent volume claims."}),"\n",(0,d.jsx)(n.h2,{id:"physical-layout",children:"Physical Layout"}),"\n",(0,d.jsx)(n.p,{children:"The enclave uses a 16-port managed switch. Port assignments:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  16-port Switch                         \u2502\n\u2502  Port  1: nuc-00       Port  9: nuc-02-kvm  \u2502\n\u2502  Port  2: nuc-01       Port 10: nuc-03-kvm  \u2502\n\u2502  Port  3: nuc-02       Port 11: (unused)    \u2502\n\u2502  Port  4: nuc-03       Port 12: (unused)    \u2502\n\u2502  Port  5: nuc-01-vms   Port 13: (unused)    \u2502\n\u2502  Port  6: nuc-02-vms   Port 14: (unused)    \u2502\n\u2502  Port  7: nuc-03-vms   Port 15: spark-e     \u2502\n\u2502  Port  8: nuc-01-kvm   Port 16: uplink      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,d.jsx)(n.h2,{id:"bios-configuration",children:"BIOS Configuration"}),"\n",(0,d.jsx)(n.p,{children:"Apply the following BIOS settings to each NUC before OS installation:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Boot order:"})," Network (PXE) first, SSD/NVMe second"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Secure Boot:"})," Disabled (required for Harvester PXE boot)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"VT-x / VT-d:"})," Enabled (required for KVM on nuc-00)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Wake-on-LAN:"})," Enabled (optional, useful for remote power-on)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Auto power-on:"})," Enabled after power loss (optional, for recovery)"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Access the BIOS via ",(0,d.jsx)(n.strong,{children:"F2"})," during POST, or ",(0,d.jsx)(n.strong,{children:"F7"})," for the one-time boot menu."]}),"\n",(0,d.jsx)(n.h2,{id:"cabling-notes",children:"Cabling Notes"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Label each cable at both ends (e.g., ",(0,d.jsx)(n.code,{children:"nuc-00 \u2194 sw-p1"}),")"]}),"\n",(0,d.jsx)(n.li,{children:"Use different cable colors if possible: blue for management, yellow for uplink"}),"\n",(0,d.jsx)(n.li,{children:"Leave slack for future additions \u2014 don't cable-tie too tight"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"power-consumption",children:"Power Consumption"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"State"}),(0,d.jsx)(n.th,{children:"Per NUC"}),(0,d.jsx)(n.th,{children:"4\xd7 NUCs"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Idle"}),(0,d.jsx)(n.td,{children:"~15 W"}),(0,d.jsx)(n.td,{children:"~60 W"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Moderate load"}),(0,d.jsx)(n.td,{children:"~45 W"}),(0,d.jsx)(n.td,{children:"~180 W"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Peak load"}),(0,d.jsx)(n.td,{children:"~65 W"}),(0,d.jsx)(n.td,{children:"~260 W"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"The full cluster draws roughly 2\u20133 amps at 120V under normal load \u2014 a standard outlet circuit handles this comfortably."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>l});var s=r(6540);const d={},t=s.createContext(d);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);