"use strict";(globalThis.webpackChunkdocs_enclave_kubernerdes_com=globalThis.webpackChunkdocs_enclave_kubernerdes_com||[]).push([[372],{4535(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"day-0/day-0","title":"Day 0 \u2014 Design","description":"Day 0 is about making decisions before any hardware is racked or software installed. Mistakes made here cascade through every subsequent phase \u2014 take the time to get the design right.","source":"@site/docs/day-0/index.md","sourceDirName":"day-0","slug":"/day-0/","permalink":"/docs/day-0/","draft":false,"unlisted":false,"editUrl":"https://github.com/jradtke-rgs/docs.enclave.kubernerdes.com/edit/main/docs/day-0/index.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"day-0","title":"Day 0 \u2014 Design","sidebar_label":"Overview","sidebar_position":1},"sidebar":"enclaveSidebar","previous":{"title":"Getting Started","permalink":"/docs/getting-started"},"next":{"title":"Hardware","permalink":"/docs/day-0/hardware"}}');var a=n(4848),t=n(8453);const r={id:"day-0",title:"Day 0 \u2014 Design",sidebar_label:"Overview",sidebar_position:1},d="Day 0 \u2014 Design",l={},o=[{value:"What Day 0 Covers",id:"what-day-0-covers",level:2},{value:"Key Design Decisions",id:"key-design-decisions",level:2},{value:"Single Management Segment",id:"single-management-segment",level:3},{value:"Bootstrapped Infrastructure",id:"bootstrapped-infrastructure",level:3},{value:"Air-Gap Ready",id:"air-gap-ready",level:3},{value:"Outcomes",id:"outcomes",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"day-0--design",children:"Day 0 \u2014 Design"})}),"\n",(0,a.jsx)(s.p,{children:"Day 0 is about making decisions before any hardware is racked or software installed. Mistakes made here cascade through every subsequent phase \u2014 take the time to get the design right."}),"\n",(0,a.jsx)(s.h2,{id:"what-day-0-covers",children:"What Day 0 Covers"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Topic"}),(0,a.jsx)(s.th,{children:"Document"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"Hardware bill of materials, NUC specs, cabling"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"/docs/day-0/hardware",children:"Hardware"})})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"IP address scheme, DNS zones, DHCP scopes, VIPs"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"/docs/day-0/network-planning",children:"Network Planning"})})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"OS images, tooling downloads, offline prep"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"/docs/day-0/prerequisites",children:"Prerequisites"})})]})]})]}),"\n",(0,a.jsx)(s.h2,{id:"key-design-decisions",children:"Key Design Decisions"}),"\n",(0,a.jsx)(s.h3,{id:"single-management-segment",children:"Single Management Segment"}),"\n",(0,a.jsxs)(s.p,{children:["All nodes share a single flat ",(0,a.jsx)(s.code,{children:"/24"})," management network (",(0,a.jsx)(s.code,{children:"192.168.100.0/24"}),"). There is no VLAN separation in the base design \u2014 the enclave is physically isolated, so a flat L2 network is acceptable and simplifies the initial build. VLANs can be added later via Harvester's network configuration."]}),"\n",(0,a.jsx)(s.h3,{id:"bootstrapped-infrastructure",children:"Bootstrapped Infrastructure"}),"\n",(0,a.jsxs)(s.p,{children:["Infrastructure services (DHCP, DNS, load balancing) run as KVM VMs on ",(0,a.jsx)(s.code,{children:"nuc-00"}),", the admin host. This means:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"nuc-00"})," must come up first and be healthy before any Harvester nodes can PXE boot"]}),"\n",(0,a.jsxs)(s.li,{children:["Loss of ",(0,a.jsx)(s.code,{children:"nuc-00"})," disrupts DHCP/DNS but does ",(0,a.jsx)(s.strong,{children:"not"})," bring down the running Harvester cluster (leases persist)"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"infra-02"}),"'s HAProxy + Keepalived provides VIP redundancy for the Harvester API and Rancher Manager"]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"air-gap-ready",children:"Air-Gap Ready"}),"\n",(0,a.jsx)(s.p,{children:"The design assumes internet access is available during Day 1 setup for pulling images and packages, but all components should be configured to operate without outbound internet after provisioning. RGS Carbide's registry mirroring is the mechanism for ongoing air-gapped image distribution."}),"\n",(0,a.jsx)(s.h2,{id:"outcomes",children:"Outcomes"}),"\n",(0,a.jsx)(s.p,{children:"By the end of Day 0, you should have:"}),"\n",(0,a.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Hardware procured, racked, and powered on for initial access"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Network switch configured (if managed), cables labeled"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","IP address plan documented and agreed upon"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","DNS/DHCP zones and scopes planned"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","All required ISO images and packages downloaded"]}),"\n",(0,a.jsxs)(s.li,{className:"task-list-item",children:[(0,a.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Workstation tools installed (Ansible, kubectl, Helm, etc.)"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,s,n){n.d(s,{R:()=>r,x:()=>d});var i=n(6540);const a={},t=i.createContext(a);function r(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);